<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Language.Ninja.Misc.Annotated</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Language-Ninja-Misc-Annotated.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Language-Ninja-Misc-Annotated.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">language-ninja-0.0.1: A library for dealing with the Ninja build language.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>Copyright 2017 Awake Security</td></tr><tr><th>License</th><td>Apache-2.0</td></tr><tr><th>Maintainer</th><td>opensource@awakesecurity.com</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Language.Ninja.Misc.Annotated</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>A typeclass for AST nodes that are annotated with a polymorphic field,
   which provides a canonical lens into that field.</p><p><em>Since: 0.1.0</em></p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">class</span> <a href="file:///nix/store/da81a891bvnq4kpr5mgs5c73vixk4qzb-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Data-Functor.html#t:Functor">Functor</a> ty =&gt; <a href="#t:Annotated">Annotated</a> ty <span class="keyword">where</span><ul class="subs"></ul></li><li class="src short"><a href="#v:annotation">annotation</a> :: <a href="Language-Ninja-Misc-Annotated.html#t:Annotated">Annotated</a> ty =&gt; <a href="file:///nix/store/gy3n3qr1l1bnz1dc232259l8102aikpp-lens-4.15.1/share/doc/x86_64-linux-ghc-8.0.2/lens-4.15.1/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (ty ann) ann</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">class</span> <a href="file:///nix/store/da81a891bvnq4kpr5mgs5c73vixk4qzb-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Data-Functor.html#t:Functor">Functor</a> ty =&gt; <a id="t:Annotated" class="def">Annotated</a> ty <span class="keyword">where</span> <a href="src/Language-Ninja-Misc-Annotated.html#Annotated" class="link">Source</a> <a href="#t:Annotated" class="selflink">#</a></p><div class="doc"><p>If you have some type that represents an AST node, it is often useful to
   add a polymorphic &quot;annotation field&quot; to it, which is used for things like
   source positions.</p><p>Specifically, suppose we have the following AST node type:</p><pre>data Foo = Foo { _fooBar :: !Bar, _fooBaz :: !Baz } deriving (&#8230;)</pre><p>Then an annotation field is added by the following process:</p><ol><li>Add an extra (final) type parameter <code>ann</code> to the type.</li><li>Add an extra field <code>_fooAnn :: !ann</code>.</li><li>Derive instances of <code><a href="file:///nix/store/da81a891bvnq4kpr5mgs5c73vixk4qzb-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Data-Functor.html#t:Functor">Functor</a></code>, <code><a href="file:///nix/store/da81a891bvnq4kpr5mgs5c73vixk4qzb-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Data-Foldable.html#t:Foldable">Foldable</a></code>, and <code><a href="file:///nix/store/da81a891bvnq4kpr5mgs5c73vixk4qzb-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Data-Traversable.html#t:Traversable">Traversable</a></code>.</li><li>If the type is recursive, add a <code><a href="file:///nix/store/gy3n3qr1l1bnz1dc232259l8102aikpp-lens-4.15.1/share/doc/x86_64-linux-ghc-8.0.2/lens-4.15.1/html/Control-Lens-Plated.html#t:Plated">Plated</a></code> instance.
      See <a href="Language-Ninja-AST-Expr.html">Language.Ninja.AST.Expr</a> for a complete example of this.</li><li>Write an <code><a href="Language-Ninja-Misc-Annotated.html#t:Annotated">Annotated</a></code> instance with the canonical lens given by the
      <code>_fooAnn</code> field. There are plenty of examples around this library.</li></ol><p>The end result then looks like:</p><pre>data Foo ann
  = Foo
    { _fooAnn :: !ann
    , _fooBar :: !Bar
    , _fooBaz :: !Baz
    }
  deriving (&#8230;, Functor, Foldable, Traversable)

instance Annotated Foo where
  annotation' = &#8230;</pre><p><em>Since: 0.1.0</em></p></div><div class="subs minimal"><p class="caption">Minimal complete definition</p><p class="src"><a href="Language-Ninja-Misc-Annotated.html#v:annotation-39-">annotation'</a></p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:annotation-39-" class="def">annotation'</a> :: (ann -&gt; ann') -&gt; <a href="file:///nix/store/gy3n3qr1l1bnz1dc232259l8102aikpp-lens-4.15.1/share/doc/x86_64-linux-ghc-8.0.2/lens-4.15.1/html/Control-Lens-Type.html#t:Lens">Lens</a> (ty ann) (ty ann') ann ann' <a href="src/Language-Ninja-Misc-Annotated.html#annotation%27" class="link">Source</a> <a href="#v:annotation-39-" class="selflink">#</a></p><div class="doc"><p>Given a function that is used when <code><a href="file:///nix/store/da81a891bvnq4kpr5mgs5c73vixk4qzb-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Data-Functor.html#v:fmap">fmap</a></code>ing any subterms, return a lens
   into the &quot;annotation&quot; field.</p><p>When writing an instance, keep in mind that <code><code><a href="Language-Ninja-Misc-Annotated.html#v:annotation-39-">annotation'</a></code> id</code> should
   just be the typical definition for a lens into the annotation field.</p><pre>annotation' (f . g) == annotation' f . annotation' g</pre><p><em>Since: 0.1.0</em></p></div></div><div class="subs instances"><p id="control.i:Annotated" class="caption collapser" onclick="toggleSection('i:Annotated')">Instances</p><div id="section.i:Annotated" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:Annotated:Annotated:1" class="instance expander" onclick="toggleSection('i:ic:Annotated:Annotated:1')"></span> <a href="Language-Ninja-Misc-Annotated.html#t:Annotated">Annotated</a> <a href="Language-Ninja-AST-Expr.html#t:Expr">Expr</a></span> <a href="src/Language-Ninja-Misc-Annotated.html#line-215" class="link">Source</a> <a href="#t:Annotated" class="selflink">#</a></td><td class="doc"><p>The usual definition for <code><a href="Language-Ninja-Misc-Annotated.html#t:Annotated">Annotated</a></code>.</p><p><em>Since: 0.1.0</em></p></td></tr><tr><td colspan="2"><div id="section.i:ic:Annotated:Annotated:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:annotation-39-">annotation'</a> :: (ann -&gt; ann') -&gt; <a href="file:///nix/store/gy3n3qr1l1bnz1dc232259l8102aikpp-lens-4.15.1/share/doc/x86_64-linux-ghc-8.0.2/lens-4.15.1/html/Control-Lens-Type.html#t:Lens">Lens</a> (<a href="Language-Ninja-AST-Expr.html#t:Expr">Expr</a> ann) (<a href="Language-Ninja-AST-Expr.html#t:Expr">Expr</a> ann') ann ann' <a href="src/Language-Ninja-Misc-Annotated.html#annotation%27" class="link">Source</a> <a href="#v:annotation-39-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:Annotated:Annotated:2" class="instance expander" onclick="toggleSection('i:ic:Annotated:Annotated:2')"></span> <a href="Language-Ninja-Misc-Annotated.html#t:Annotated">Annotated</a> <a href="Language-Ninja-AST-Rule.html#t:Rule">Rule</a></span> <a href="src/Language-Ninja-Misc-Annotated.html#line-109" class="link">Source</a> <a href="#t:Annotated" class="selflink">#</a></td><td class="doc"><p>The usual definition for <code><a href="Language-Ninja-Misc-Annotated.html#t:Annotated">Annotated</a></code>.</p><p><em>Since: 0.1.0</em></p></td></tr><tr><td colspan="2"><div id="section.i:ic:Annotated:Annotated:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:annotation-39-">annotation'</a> :: (ann -&gt; ann') -&gt; <a href="file:///nix/store/gy3n3qr1l1bnz1dc232259l8102aikpp-lens-4.15.1/share/doc/x86_64-linux-ghc-8.0.2/lens-4.15.1/html/Control-Lens-Type.html#t:Lens">Lens</a> (<a href="Language-Ninja-AST-Rule.html#t:Rule">Rule</a> ann) (<a href="Language-Ninja-AST-Rule.html#t:Rule">Rule</a> ann') ann ann' <a href="src/Language-Ninja-Misc-Annotated.html#annotation%27" class="link">Source</a> <a href="#v:annotation-39-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:Annotated:Annotated:3" class="instance expander" onclick="toggleSection('i:ic:Annotated:Annotated:3')"></span> <a href="Language-Ninja-Misc-Annotated.html#t:Annotated">Annotated</a> <a href="Language-Ninja-AST-Deps.html#t:Deps">Deps</a></span> <a href="src/Language-Ninja-Misc-Annotated.html#line-128" class="link">Source</a> <a href="#t:Annotated" class="selflink">#</a></td><td class="doc"><p>The usual definition for <code><a href="Language-Ninja-Misc-Annotated.html#t:Annotated">Annotated</a></code>.</p><p><em>Since: 0.1.0</em></p></td></tr><tr><td colspan="2"><div id="section.i:ic:Annotated:Annotated:3" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:annotation-39-">annotation'</a> :: (ann -&gt; ann') -&gt; <a href="file:///nix/store/gy3n3qr1l1bnz1dc232259l8102aikpp-lens-4.15.1/share/doc/x86_64-linux-ghc-8.0.2/lens-4.15.1/html/Control-Lens-Type.html#t:Lens">Lens</a> (<a href="Language-Ninja-AST-Deps.html#t:Deps">Deps</a> ann) (<a href="Language-Ninja-AST-Deps.html#t:Deps">Deps</a> ann') ann ann' <a href="src/Language-Ninja-Misc-Annotated.html#annotation%27" class="link">Source</a> <a href="#v:annotation-39-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:Annotated:Annotated:4" class="instance expander" onclick="toggleSection('i:ic:Annotated:Annotated:4')"></span> <a href="Language-Ninja-Misc-Annotated.html#t:Annotated">Annotated</a> <a href="Language-Ninja-AST-Build.html#t:Build">Build</a></span> <a href="src/Language-Ninja-Misc-Annotated.html#line-144" class="link">Source</a> <a href="#t:Annotated" class="selflink">#</a></td><td class="doc"><p>The usual definition for <code><a href="Language-Ninja-Misc-Annotated.html#t:Annotated">Annotated</a></code>.</p><p><em>Since: 0.1.0</em></p></td></tr><tr><td colspan="2"><div id="section.i:ic:Annotated:Annotated:4" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:annotation-39-">annotation'</a> :: (ann -&gt; ann') -&gt; <a href="file:///nix/store/gy3n3qr1l1bnz1dc232259l8102aikpp-lens-4.15.1/share/doc/x86_64-linux-ghc-8.0.2/lens-4.15.1/html/Control-Lens-Type.html#t:Lens">Lens</a> (<a href="Language-Ninja-AST-Build.html#t:Build">Build</a> ann) (<a href="Language-Ninja-AST-Build.html#t:Build">Build</a> ann') ann ann' <a href="src/Language-Ninja-Misc-Annotated.html#annotation%27" class="link">Source</a> <a href="#v:annotation-39-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:Annotated:Annotated:5" class="instance expander" onclick="toggleSection('i:ic:Annotated:Annotated:5')"></span> <a href="Language-Ninja-Misc-Annotated.html#t:Annotated">Annotated</a> <a href="Language-Ninja-AST-Ninja.html#t:Ninja">Ninja</a></span> <a href="src/Language-Ninja-Misc-Annotated.html#line-183" class="link">Source</a> <a href="#t:Annotated" class="selflink">#</a></td><td class="doc"><p>The usual definition for <code><a href="Language-Ninja-Misc-Annotated.html#t:Annotated">Annotated</a></code>.</p><p><em>Since: 0.1.0</em></p></td></tr><tr><td colspan="2"><div id="section.i:ic:Annotated:Annotated:5" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:annotation-39-">annotation'</a> :: (ann -&gt; ann') -&gt; <a href="file:///nix/store/gy3n3qr1l1bnz1dc232259l8102aikpp-lens-4.15.1/share/doc/x86_64-linux-ghc-8.0.2/lens-4.15.1/html/Control-Lens-Type.html#t:Lens">Lens</a> (<a href="Language-Ninja-AST-Ninja.html#t:Ninja">Ninja</a> ann) (<a href="Language-Ninja-AST-Ninja.html#t:Ninja">Ninja</a> ann') ann ann' <a href="src/Language-Ninja-Misc-Annotated.html#annotation%27" class="link">Source</a> <a href="#v:annotation-39-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:Annotated:Annotated:6" class="instance expander" onclick="toggleSection('i:ic:Annotated:Annotated:6')"></span> <a href="Language-Ninja-Misc-Annotated.html#t:Annotated">Annotated</a> <a href="Language-Ninja-Lexer.html#t:LBuild">LBuild</a></span> <a href="src/Language-Ninja-Misc-Annotated.html#line-493" class="link">Source</a> <a href="#t:Annotated" class="selflink">#</a></td><td class="doc"><p>The usual definition for <code><a href="Language-Ninja-Misc-Annotated.html#t:Annotated">Annotated</a></code>.</p><p><em>Since: 0.1.0</em></p></td></tr><tr><td colspan="2"><div id="section.i:ic:Annotated:Annotated:6" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:annotation-39-">annotation'</a> :: (ann -&gt; ann') -&gt; <a href="file:///nix/store/gy3n3qr1l1bnz1dc232259l8102aikpp-lens-4.15.1/share/doc/x86_64-linux-ghc-8.0.2/lens-4.15.1/html/Control-Lens-Type.html#t:Lens">Lens</a> (<a href="Language-Ninja-Lexer.html#t:LBuild">LBuild</a> ann) (<a href="Language-Ninja-Lexer.html#t:LBuild">LBuild</a> ann') ann ann' <a href="src/Language-Ninja-Misc-Annotated.html#annotation%27" class="link">Source</a> <a href="#v:annotation-39-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:Annotated:Annotated:7" class="instance expander" onclick="toggleSection('i:ic:Annotated:Annotated:7')"></span> <a href="Language-Ninja-Misc-Annotated.html#t:Annotated">Annotated</a> <a href="Language-Ninja-Lexer.html#t:LName">LName</a></span> <a href="src/Language-Ninja-Misc-Annotated.html#line-288" class="link">Source</a> <a href="#t:Annotated" class="selflink">#</a></td><td class="doc"><p>The usual definition for <code><a href="Language-Ninja-Misc-Annotated.html#t:Annotated">Annotated</a></code>.</p><p><em>Since: 0.1.0</em></p></td></tr><tr><td colspan="2"><div id="section.i:ic:Annotated:Annotated:7" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:annotation-39-">annotation'</a> :: (ann -&gt; ann') -&gt; <a href="file:///nix/store/gy3n3qr1l1bnz1dc232259l8102aikpp-lens-4.15.1/share/doc/x86_64-linux-ghc-8.0.2/lens-4.15.1/html/Control-Lens-Type.html#t:Lens">Lens</a> (<a href="Language-Ninja-Lexer.html#t:LName">LName</a> ann) (<a href="Language-Ninja-Lexer.html#t:LName">LName</a> ann') ann ann' <a href="src/Language-Ninja-Misc-Annotated.html#annotation%27" class="link">Source</a> <a href="#v:annotation-39-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:Annotated:Annotated:8" class="instance expander" onclick="toggleSection('i:ic:Annotated:Annotated:8')"></span> <a href="Language-Ninja-Misc-Annotated.html#t:Annotated">Annotated</a> <a href="Language-Ninja-Lexer.html#t:Lexeme">Lexeme</a></span> <a href="src/Language-Ninja-Misc-Annotated.html#line-182" class="link">Source</a> <a href="#t:Annotated" class="selflink">#</a></td><td class="doc"><p>The usual definition for <code><a href="Language-Ninja-Misc-Annotated.html#t:Annotated">Annotated</a></code>.</p><p><em>Since: 0.1.0</em></p></td></tr><tr><td colspan="2"><div id="section.i:ic:Annotated:Annotated:8" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:annotation-39-">annotation'</a> :: (ann -&gt; ann') -&gt; <a href="file:///nix/store/gy3n3qr1l1bnz1dc232259l8102aikpp-lens-4.15.1/share/doc/x86_64-linux-ghc-8.0.2/lens-4.15.1/html/Control-Lens-Type.html#t:Lens">Lens</a> (<a href="Language-Ninja-Lexer.html#t:Lexeme">Lexeme</a> ann) (<a href="Language-Ninja-Lexer.html#t:Lexeme">Lexeme</a> ann') ann ann' <a href="src/Language-Ninja-Misc-Annotated.html#annotation%27" class="link">Source</a> <a href="#v:annotation-39-" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:annotation" class="def">annotation</a> :: <a href="Language-Ninja-Misc-Annotated.html#t:Annotated">Annotated</a> ty =&gt; <a href="file:///nix/store/gy3n3qr1l1bnz1dc232259l8102aikpp-lens-4.15.1/share/doc/x86_64-linux-ghc-8.0.2/lens-4.15.1/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (ty ann) ann <a href="src/Language-Ninja-Misc-Annotated.html#annotation" class="link">Source</a> <a href="#v:annotation" class="selflink">#</a></p><div class="doc"><p>This is just shorthand for <code><code><a href="Language-Ninja-Misc-Annotated.html#v:annotation-39-">annotation'</a></code> id</code>.</p><p><em>Since: 0.1.0</em></p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.3</p></div></body></html>